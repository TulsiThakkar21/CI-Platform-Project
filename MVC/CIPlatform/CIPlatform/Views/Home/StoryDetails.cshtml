@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


@using CIPlatform.Models.ViewModels
@model LandingAllModels



<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"></script>


    @*-------Links for checkbox---------*@

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.min.js"></script>


    <!-- Font Awesome -->

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">



    <link rel="stylesheet" href="~/css/platformlandingpage.css">
    <link rel="stylesheet" href="~/css/volLanding.css">


    <title>Story Details</title>
    <style>

        .openmission
        {
            width: 153px;
            height: 40px;
            background: #FFFFFF 0% 0% no-repeat padding-box;
            border: 2px solid #F88634;
            border-radius: 24px;
            color: #F88634;
            margin-top: 5%;
            margin-left: -10%;
            
        }

        .reco-btn
        {
            width: 70%;
            height: auto;
            background: #FFFFFF 0% 0% no-repeat padding-box;
            border: 2px solid grey;
            border-radius: 24px;
            color: grey;
            text-align: center;
            margin-top: 5%;
            margin-left: 2%;
            
        }

    </style>
    </head>

<body>


   <header>
    <div class="container-fluid">


        <nav class="navbar navbar-expand-md navbar-light ">

            <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                     <li class="nav-item stories">
                            <a class="nav-link" asp-action="PlatformLandingPage" asp-controller="Home">Home</a>
                        </li>
                        <li class="nav-item stories">
                            <a class="nav-link" asp-action="StoryListing" asp-controller="Home">Stories</a>
                        </li>
                        <li class="nav-item stories">
                                    <a class="nav-link" asp-action="PrivacyPolicy" asp-controller="Home">Privacy</a>
                          </li>
                        <li>
                            <img src="data:image;base64,@ViewBag.avatarimg" alt="" class="user-avatar">
                        </li>
                  



                </ul>
                <div class="nav-item dropdown" style="margin-right:15%; width:auto;">
                    <a class="nav-link" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: grey; ">

                        <button class="btn1 dropdown-toggle" style="width:100%; border: none; color: grey" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            @ViewBag.fullname
                        </button>

                    </a>
                   <ul class="dropdown-menu" aria-labelledby="navbarDropdown">

                            <li><a class="dropdown-item" asp-controller="Home" asp-action="EditProfile">My Profile</a></li>
                            
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" asp-controller="Home" asp-action="Timesheet">Volunteering Timesheet</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" asp-controller="Home" asp-action="Logout">Logout</a></li>
                        </ul>
                </div>

            </div>
        </nav>
        <hr>

    </div>
</header>

    <br />
        <div class="container-fluid">

        <div class="row no-gutters">



            <div class="col-md-6 first-col ">
                <img id="changingimg" class="main-img" src="~/NewFolder/storydetailmainimg.png" style="height: 80%;">





                <div class="container text-center my-3">

                    <div class="row mx-auto my-auto justify-content-center">
                        <div id="recipeCarousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner" role="listbox">
                                <div class="carousel-item active">
                                    <div class="col-sm-3">
                                        <div class="card" style="width: 75%;">
                                            <div class="card-img">
                                                <button style="background: none; border: none;" id="unique1"
                                                        onclick="function1()">
                                                    <img src="~/NewFolder/vol-carousel-1.png" class="img-fluid">
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <div class="col-sm-3">
                                        <div class="card" style="width: 75%;">
                                            <div class="card-img">
                                                <button style="background: none; border: none;" id="unique2"
                                                        onclick="function2()">
                                                    <img src="~/NewFolder/vol-carrousel-2.png" class="img-fluid">
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <div class="col-sm-3">
                                        <div class="card" style="width: 75%;">
                                            <div class="card-img">
                                                <button style="background: none; border: none;" id="unique3"
                                                        onclick="function3()">
                                                    <img src="~/NewFolder/volcarousel-3.png" class="img-fluid">
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="carousel-item">
                                    <div class="col-sm-3">
                                        <div class="card" style="width: 75%;">
                                            <div class="card-img">
                                                <button style="background: none; border: none;" id="unique4"
                                                        onclick="function4()">
                                                    <img src="~/NewFolder/vol-carousel-4.png" class="img-fluid">
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                            </div>
                            <a class="carousel-control-prev bg-transparent w-aut" href="#recipeCarousel" role="button"
                               data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            </a>
                            <a class="carousel-control-next bg-transparent w-aut" href="#recipeCarousel" role="button"
                               data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            </a>
                        </div>
                    </div>

                </div>

            </div>



            <div class="col-md-6 right-div ">
                @foreach (var item in ViewBag.specificStory)

                {
                    <div class="txt">
                        <div class="col-4">
                           <img src="~/NewFolder/volunteer2.png" alt="" class="vol-img" style="margin-left:-5%;">
                            <p class="vol-name" style="margin-left:-7%; font-size:large;">@item.User.FirstName @item.User.LastName</p>
                        </div>
                        <br>
                        <h1 style="color:grey">@item.Title</h1>
                        <br>

                       
                        
                        <br />
                          <p class="para" style="font-size:large;">@item.Description</p>
                          <br /> 


                          <div style="display:flex">
                              <h5 style="color:grey;"><b>Here you can find video link for this story:</b></h5>            
                               <a class="card-text" style="text-align: justify; font-size: large; color:blue; height:auto; width:auto; margin-left: 3%;" href="@item.VidUrl" target="_blank">@item.VidUrl</a>
                        </div>


                        <br>
                        <div style="display:flex">
                        <h5 style="color:grey;" ><b>Story Published At : </b></h5>
                        <p class="para" style="font-size:large;">&nbsp;&nbsp;@item.PublishedAt.ToShortDateString()</p>
                          </div>
                        <br>
                        <div style="display:flex">
                            <h5 style="color:grey;"><b>Why I Voulnteer : </b></h5>
                            <p class="para" style="font-size:large;">&nbsp;&nbsp;@item.User.WhyIVolunteer</p>
                        </div>
                        <br>
                     
                            <div class="row">
                                <div class="col-6">
                                  <div id="dropdownrecmd">
                                    <li class="nav-item dropdown" id="menu2" style="list-style-type: none;">
                                        <button class="nav-link bg-transparent text-dark reco-btn" id="navbarDropdown"
                                            role="button" data-bs-toggle="dropdown" aria-expanded="false" >
                                            <img class="img1" src="~/NewFolder/add1.png">
                                            Recommend to a Co-Worker &nbsp;&nbsp;
                                            <i class="bi bi-chevron-down"></i>

                                        </button>
                                        <ul class="dropdown-menu scroll-dropdown" aria-labelledby="navbarDropdown">

                                            <li>
                                                <ul>
                                                    @foreach (var itm in ViewBag.user)
                                                    {
                                                        <li class="form-check">
                                                            <input class="form-check-input checkbox" type="checkbox" value="@itm.Email" id="flexCheckDefault">
                                                            <label class="form-check-label" for="flexCheckDefault">
                                                                @itm.FirstName
                                                            </label>

                                                        </li>
                                                    }
                                                    <br>
                                                    <button id="btn_" onclick="rccall(@item.Mission.MissionId)">Submit</button>

                                                </ul>
                                            </li>


                                        </ul>
                                    </li>
                                </div>
                              </div>

                                <div class="col-6">
                                <a style="text-decoration: none ; color:#414141" asp-action="VolunteeringMission" asp-controller="Home" asp-route-id="@item.Mission.MissionId">
                                    <button class="openmission">
                                        Open Mission

                                        <img src="~/NewFolder/right-arrow.png" alt="" class="right-arrow">
                                    </button>
                                </a>
                                </div>


                            </div>


                        </div>
                        }
                        
                    </div>

                


            </div>
            <br>
            <div class="row">

                <div class="col-12">
                    @foreach (var item in ViewBag.specificStory)
                    {

                        <ul class="nav nav-tabs">
                            <li class="active"><a data-toggle="tab" href="#mission" class="active links1" style="margin-left: 0%;">@item.Mission.Title</a></li>
                           
                        </ul>

                        <div class="tab-content">
                         <br />
                         <div style="display:flex">
                        <h5 style="margin-top:1%; color:grey;"><b>Short Description: </b></h5>
                        <p class="para" style="font-size:large; margin-top:1%;">&nbsp;&nbsp; @item.Mission.ShortDescription</p>
                        </div>
                        
                        <div style="display:flex">
                        <h5 style="margin-top:1%; color:grey;"><b>Organization Name: </b></h5>
                        <p class="para" style="font-size:large; margin-top:1%;">&nbsp;&nbsp; @item.Mission.OrganizationName</p>
                        </div>
                          
                        <div style="display:flex">
                            
                            <h5 style="margin-top:1%; width:auto; color:grey;"><b>Description: </b></h5>

                           
                           
                            <p class="para" style="font-size:medium; margin-top:1%; text-align:justify; margin-left:5%;"> @item.Mission.Description</p>

                           

                        </div>
                        
                         
                        <br>

                        

                       

                       
                            </div>


                            




                        }

                        </div>
                    
                </div>
                



              

            </div>

        </div>





    </div>

    <br />
    <hr>
<footer>
                
    <div class="footer">
        
        <a href="#" class="privacyp" style="color: grey; text-decoration: none; margin-left: 2%;">Privacy Policy</a>
       


    </div>
</footer>
<br>

<script>


    function rccall(MissionId) {
        debugger
    var checkbox_value = "";
    var checked_Val = [];
    $(":checkbox").each(function () {
        var ischecked = $(this).is(":checked");
        if (ischecked) {
            checkbox_value += $(this).val() + ",";
            checked_Val.push($(this).val());
        }

    });

    alert(checkbox_value);
    console.log(checkbox_value);


    $.ajax({
        url: '/Home/Recommendedto',
        type: 'POST',
        data: {
            checkbox_value: checkbox_value,
            MissionId: MissionId
        },
        success: function (data) {
            location.reload();
            console.log("success");
            
        },
        error: function () {
            // Handle error response from the server, e.g. show an error message to the user
            /*alert('Error: Could not like mission.');*/
            console.log("fail");
            location.reload();
        }
    });


   


}


</script>


    </body>
    </html>